<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé™ –°–¢–†–ê–•–û–í–û–ô –¢–†–ò–õ–õ–ï–†: –°–ü–ê–°–ò –°–í–û–ò –î–ï–ù–¨–ì–ò!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial Black', Gadget, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .screen {
            display: none;
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
        }

        .screen.active {
            display: block;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* –ó–ê–ì–†–£–ó–ö–ê */
        #loading {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .loader {
            padding: 40px;
        }

        .loader h1 {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
            animation: pulse 2s infinite;
        }

        .loading-bar {
            width: 300px;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin: 30px auto;
            overflow: hidden;
            border: 2px solid #00ffff;
        }

        .progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00ffff, #ff00ff);
            animation: loading 3s ease-in-out forwards;
        }

        @keyframes loading { to { width: 100%; } }
        @keyframes pulse { 
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ */
        .menu-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 40px 20px;
        }

        .game-title {
            font-size: 2.8em;
            margin-bottom: 40px;
            text-shadow: 0 0 15px #ff00ff, 0 0 25px #ff00ff;
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s infinite alternate;
            line-height: 1.2;
        }

        @keyframes titleGlow {
            from { text-shadow: 0 0 15px #ff00ff, 0 0 25px #ff00ff; }
            to { text-shadow: 0 0 20px #00ffff, 0 0 30px #00ffff, 0 0 40px #00ffff; }
        }

        .emergency-call-preview {
            background: rgba(255,0,0,0.2);
            border: 3px solid #ff0000;
            padding: 25px;
            margin: 30px 0;
            border-radius: 15px;
            animation: emergencyPulse 2s infinite;
        }

        @keyframes emergencyPulse {
            0%, 100% { border-color: #ff0000; box-shadow: 0 0 10px #ff0000; }
            50% { border-color: #ff6666; box-shadow: 0 0 20px #ff6666; }
        }

        .siren-animation {
            font-size: 2em;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        .menu-buttons {
            margin: 40px 0;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .btn-primary, .btn-secondary, .btn-emergency {
            padding: 18px 35px;
            margin: 10px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            min-width: 250px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            color: #000;
            box-shadow: 0 0 20px #00ffff;
        }

        .btn-primary:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px #ff00ff;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid #00ffff;
        }

        .btn-secondary:hover {
            background: rgba(0,255,255,0.2);
            transform: scale(1.05);
        }

        .btn-emergency {
            background: linear-gradient(45deg, #ff0000, #ff6666);
            color: white;
            box-shadow: 0 0 25px #ff0000;
            animation: emergencyBtnPulse 1.5s infinite;
        }

        @keyframes emergencyBtnPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 25px #ff0000; }
            50% { transform: scale(1.05); box-shadow: 0 0 35px #ff0000; }
        }

        /* –í–´–ë–û–† –ö–û–ú–ê–ù–î–´ */
        .team-selection {
            margin-top: 50px;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            border: 2px solid #00ffff;
        }

        .team-selection h3 {
            margin-bottom: 25px;
            font-size: 1.5em;
            color: #00ffff;
        }

        #team-name {
            padding: 15px;
            font-size: 1.2em;
            width: 100%;
            max-width: 400px;
            border: 2px solid #00ffff;
            border-radius: 25px;
            background: rgba(0,0,0,0.3);
            color: white;
            text-align: center;
            margin-bottom: 30px;
        }

        .team-roles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .role-card {
            background: rgba(255,255,255,0.1);
            padding: 25px 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
        }

        .role-card:hover {
            background: rgba(0,255,255,0.2);
            transform: translateY(-5px);
        }

        .role-card.selected {
            border-color: #00ffff;
            background: rgba(0,255,255,0.3);
            box-shadow: 0 0 15px #00ffff;
        }

        .role-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        /* –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù */
        .game-header {
            display: flex;
            justify-content: space-between;
            padding: 20px;
            background: rgba(0,0,0,0.5);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #00ffff;
            box-shadow: 0 0 15px rgba(0,255,255,0.5);
            flex-wrap: wrap;
            gap: 15px;
        }

        .game-content {
            min-height: 60vh;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            border: 2px solid #ff00ff;
            box-shadow: 0 0 20px rgba(255,0,255,0.3);
            overflow-y: auto;
        }

        .control-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(0,0,0,0.5);
            border-radius: 15px;
            border: 2px solid #00ffff;
            flex-wrap: wrap;
            gap: 15px;
        }

        .time-display {
            font-size: 1.5em;
            font-weight: bold;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
        }

        /* –°–¢–ò–õ–ò –ö–õ–ò–ï–ù–¢–û–í –ò –°–¢–†–ê–•–û–í–û–ö */
        .client-profile {
            background: rgba(0,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #00ffff;
        }

        .client-avatar {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .insurance-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .insurance-card {
            background: rgba(255,255,255,0.05);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #00ffff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .insurance-card:hover {
            background: rgba(0,255,255,0.2);
            transform: translateY(-5px);
        }

        .insurance-card.selected {
            border-color: #00ff00;
            background: rgba(0,255,0,0.1);
            box-shadow: 0 0 20px #00ff00;
        }

        .insurance-price {
            font-size: 1.3em;
            color: #00ff00;
            margin-top: 15px;
            font-weight: bold;
        }

        .event-screen {
            text-align: center;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .event-info {
            background: rgba(255,0,0,0.2);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 3px solid #ff0000;
            animation: emergencyPulse 2s infinite;
        }

        .calculation-interface {
            background: rgba(0,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #00ffff;
        }

        .formula-box {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #ff00ff;
            font-family: 'Courier New', monospace;
            text-align: left;
        }

        .formula-title {
            color: #00ffff;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .formula {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #00ff00;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .action-btn {
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid #00ffff;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .action-btn:hover {
            background: rgba(0,255,255,0.3);
            transform: scale(1.05);
        }

        .action-btn.correct {
            border-color: #00ff00;
            background: rgba(0,255,0,0.2);
            box-shadow: 0 0 15px #00ff00;
        }

        .action-btn.incorrect {
            border-color: #ff0000;
            background: rgba(255,0,0,0.2);
            box-shadow: 0 0 15px #ff0000;
        }

        .feedback-area {
            margin: 20px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result-message {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2em;
            text-align: center;
        }

        .success {
            background: rgba(0,255,0,0.2);
            border: 2px solid #00ff00;
            color: #00ff00;
        }

        .failure {
            background: rgba(255,0,0,0.2);
            border: 2px solid #ff0000;
            color: #ff0000;
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 768px) {
            .game-title { font-size: 2em; }
            .insurance-options { grid-template-columns: 1fr; }
            .quick-actions { grid-template-columns: 1fr; }
            .game-header, .control-panel { flex-direction: column; }
        }
    </style>
</head>
<body>
    <!-- –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò -->
    <div id="loading" class="screen active">
        <div class="loader">
            <h1>üé™ –°–¢–†–ê–•–û–í–û–ô –¢–†–ò–õ–õ–ï–†</h1>
            <p style="font-size: 1.3em; margin-bottom: 20px;">–ó–∞–≥—Ä—É–∂–∞–µ–º –º–∏—Å—Å–∏—é...</p>
            <div class="loading-bar">
                <div class="progress"></div>
            </div>
        </div>
    </div>

    <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
    <div id="main-menu" class="screen">
        <div class="menu-container">
            <h1 class="game-title">üé™ –°–¢–†–ê–•–û–í–û–ô –¢–†–ò–õ–õ–ï–†<br>–°–ü–ê–°–ò –°–í–û–ò –î–ï–ù–¨–ì–ò! üé™</h1>
            
            <div class="emergency-call-preview">
                <div class="siren-animation">üö®</div>
                <p style="font-size: 1.2em; font-weight: bold;">–§–ò–ù–ê–ù–°–û–í–ê–Ø –ö–ê–¢–ê–°–¢–†–û–§–ê –ù–ê–í–ò–°–õ–ê –ù–ê–î –ì–û–†–û–î–û–ú!</p>
            </div>

            <div class="menu-buttons">
                <button onclick="startNewGame()" class="btn-primary">üöÄ –ù–ê–ß–ê–¢–¨ –ú–ò–°–°–ò–Æ</button>
                <button onclick="showInstructions()" class="btn-secondary">üìñ –ò–ù–°–¢–†–£–ö–¶–ò–Ø</button>
            </div>

            <!-- –í–´–ë–û–† –ö–û–ú–ê–ù–î–´ -->
            <div class="team-selection">
                <h3>üë• –°–û–ó–î–ê–ô–¢–ï –ö–û–ú–ê–ù–î–£ –°–ü–ê–°–ê–¢–ï–õ–ï–ô:</h3>
                <input type="text" id="team-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã" maxlength="20">
                
                <div class="team-roles-grid">
                    <div class="role-card" data-role="analyst">
                        <div class="role-icon">üîç</div>
                        <div class="role-name">–ê–Ω–∞–ª–∏—Ç–∏–∫</div>
                        <div style="font-size: 0.9em; margin-top: 8px; opacity: 0.8;">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏</div>
                    </div>
                    <div class="role-card" data-role="consultant">
                        <div class="role-icon">üíº</div>
                        <div class="role-name">–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</div>
                        <div style="font-size: 0.9em; margin-top: 8px; opacity: 0.8;">–ü–æ–¥–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù -->
    <div id="game-screen" class="screen">
        <div class="container">
            <div class="game-header">
                <div class="team-info">
                    <span style="font-size: 1.2em;">–ö–æ–º–∞–Ω–¥–∞: <span id="current-team">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ì–µ—Ä–æ–∏</span></span>
                </div>
                <div class="score-info">
                    <span style="font-size: 1.2em;">–ë–∞–ª–ª—ã: <span id="current-score">0</span></span>
                </div>
                <div class="budget-info">
                    <span style="font-size: 1.2em;">–£—Å–ø–µ—à–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤: <span id="cases-count">0</span>/3</span>
                </div>
            </div>

            <div class="game-content">
                <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>

            <div class="control-panel">
                <button id="next-btn" class="btn-primary" onclick="nextStage()" style="display: none;">
                    ‚û°Ô∏è –°–õ–ï–î–£–Æ–©–ò–ô –ö–õ–ò–ï–ù–¢
                </button>
                <div class="time-display">
                    ‚è∞ –í—Ä–µ–º—è: <span id="game-timer">10:00</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù –†–ï–ó–£–õ–¨–¢–ê–¢–û–í -->
    <div id="results-screen" class="screen">
        <div class="container">
            <h1 style="font-size: 2.8em; margin-bottom: 30px; color: #00ffff; text-align: center;">üèÜ –ú–ò–°–°–ò–Ø –í–´–ü–û–õ–ù–ï–ù–ê! üèÜ</h1>
            
            <div style="background: rgba(255,255,255,0.05); padding: 30px; border-radius: 15px; margin: 30px 0; border: 2px solid #00ffff;">
                <div style="display: flex; justify-content: space-between; margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                    <span>–£—Å–ø–µ—à–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:</span>
                    <span id="final-cases">0/3</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                    <span>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –±–∞–ª–ª—ã:</span>
                    <span id="final-score">0</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin: 20px 0; padding: 15px; background: rgba(0,255,255,0.2); border-radius: 10px; font-size: 1.4em; font-weight: bold; border: 2px solid #00ffff;">
                    <span>–û–ë–©–ò–ô –†–ï–ó–£–õ–¨–¢–ê–¢:</span>
                    <span id="total-score">–ù–æ–≤–∏—á–æ–∫</span>
                </div>
            </div>
            
            <div style="margin: 40px 0; padding: 30px; background: linear-gradient(45deg, #00ffff, #ff00ff); border-radius: 20px; animation: rankGlow 2s infinite alternate; text-align: center;">
                <div id="rank-icon" style="font-size: 4em; margin-bottom: 20px;">üî∞</div>
                <h2 id="rank-title" style="font-size: 2em;">–ù–æ–≤–∏—á–æ–∫-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</h2>
            </div>

            <div style="margin-top: 40px; display: flex; flex-direction: column; gap: 15px; align-items: center;">
                <button onclick="playAgain()" class="btn-primary">üîÑ –ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
                <button onclick="showMainMenu()" class="btn-secondary">üìã –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ</button>
            </div>
        </div>
    </div>

    <script>
        // –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò–ì–†–´
        let gameState = {
            score: 0,
            completedCases: 0,
            timeLeft: 600, // 10 –º–∏–Ω—É—Ç
            currentTeam: "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ì–µ—Ä–æ–∏",
            currentClient: null,
            selectedInsurance: null,
            gameActive: false,
            timerInterval: null,
            currentStage: 'client' // client -> event -> calculation
        };

        // –ë–ê–ó–ê –î–ê–ù–ù–´–• –ö–õ–ò–ï–ù–¢–û–í –ò –°–¢–†–ê–•–û–í–û–ö
        const clients = [
            {
                id: 1,
                name: "–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤",
                avatar: "üë®‚Äçüíº",
                age: 35,
                occupation: "IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç",
                income: "–í—ã—Å–æ–∫–∏–π",
                family: "–ñ–µ–Ω–∞—Ç, –¥–≤–æ–µ –¥–µ—Ç–µ–π",
                property: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ –∏–ø–æ—Ç–µ–∫–µ, –Ω–æ–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å",
                description: "–†–∞–±–æ—Ç–∞–µ—Ç –≤ IT-–∫–æ–º–ø–∞–Ω–∏–∏, –∏–º–µ–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –≤—ã—Å–æ–∫–∏–π –¥–æ—Ö–æ–¥. –ñ–∏–≤–µ—Ç –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä–µ, –∫—É–ø–ª–µ–Ω–Ω–æ–π –≤ –∏–ø–æ—Ç–µ–∫—É. –ù–µ–¥–∞–≤–Ω–æ –ø—Ä–∏–æ–±—Ä–µ–ª –Ω–æ–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å. –ó–∞–±–æ—Ç–∏—Ç—Å—è –æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–µ–º—å–∏.",
                risks: ["–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –∞–≤–∞—Ä–∏–∏", "–ü–æ—Ç–µ—Ä—è —Ä–∞–±–æ—Ç—ã", "–ü—Ä–æ–±–ª–µ–º—ã —Å –∑–¥–æ—Ä–æ–≤—å–µ–º", "–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –∏–º—É—â–µ—Å—Ç–≤–∞"],
                budget: 150000
            },
            {
                id: 2, 
                name: "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞",
                avatar: "üë©‚Äçüéì",
                age: 22,
                occupation: "–°—Ç—É–¥–µ–Ω—Ç–∫–∞",
                income: "–ù–∏–∑–∫–∏–π",
                family: "–ù–µ –∑–∞–º—É–∂–µ–º, –∂–∏–≤–µ—Ç —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏",
                property: "–ù–æ—É—Ç–±—É–∫, —Å–º–∞—Ä—Ç—Ñ–æ–Ω, –≤–µ–ª–æ—Å–∏–ø–µ–¥",
                description: "–£—á–∏—Ç—Å—è –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –Ω–∞ –¥–Ω–µ–≤–Ω–æ–º –æ—Ç–¥–µ–ª–µ–Ω–∏–∏. –ü–æ–¥—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—Å—Ç–≤–æ–º. –ñ–∏–≤–µ—Ç —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏. –ò–º–µ–µ—Ç —Ü–µ–Ω–Ω—ã–µ –≤–µ—â–∏ –¥–ª—è —É—á–µ–±—ã –∏ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è.",
                risks: ["–ö—Ä–∞–∂–∞ –∏–º—É—â–µ—Å—Ç–≤–∞", "–ù–µ—Å—á–∞—Å—Ç–Ω—ã–µ —Å–ª—É—á–∞–∏", "–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Ö–Ω–∏–∫–æ–π", "–í–µ–ª–æ—Å–∏–ø–µ–¥–Ω—ã–µ –∞–≤–∞—Ä–∏–∏"],
                budget: 30000
            },
            {
                id: 3,
                name: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
                avatar: "üë®‚Äçüåæ",
                age: 45,
                occupation: "–§–µ—Ä–º–µ—Ä",
                income: "–°—Ä–µ–¥–Ω–∏–π",
                family: "–ñ–µ–Ω–∞—Ç, —Ç—Ä–æ–µ –¥–µ—Ç–µ–π",
                property: "–§–µ—Ä–º–∞, —Å–µ–ª—å—Ö–æ–∑—Ç–µ—Ö–Ω–∏–∫–∞, –¥–æ–º",
                description: "–í–ª–∞–¥–µ–µ—Ç —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–º —Ö–æ–∑—è–π—Å—Ç–≤–æ–º. –ò–º–µ–µ—Ç —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—É—é —Ç–µ—Ö–Ω–∏–∫—É –∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö. –†–∞–±–æ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∏ —É—Ä–æ–∂–∞—è.",
                risks: ["–°—Ç–∏—Ö–∏–π–Ω—ã–µ –±–µ–¥—Å—Ç–≤–∏—è", "–ë–æ–ª–µ–∑–Ω–∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö", "–ü–æ–ª–æ–º–∫–∞ —Ç–µ—Ö–Ω–∏–∫–∏", "–ù–µ—É—Ä–æ–∂–∞–π"],
                budget: 80000
            }
        ];

        const insurancePackages = [
            {
                id: "premium",
                name: "–ü–†–ï–ú–ò–£–ú –ó–ê–©–ò–¢–ê",
                description: "–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Ä–∏—Å–∫–æ–≤. –í–∫–ª—é—á–∞–µ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –∂–∏–∑–Ω–∏, –∑–¥–æ—Ä–æ–≤—å—è, –∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã –≤—ã–ø–ª–∞—Ç.",
                coverage: ["–ê–≤—Ç–æ –ö–ê–°–ö–û", "–ñ–∏–∑–Ω—å –∏ –∑–¥–æ—Ä–æ–≤—å–µ", "–ò–º—É—â–µ—Å—Ç–≤–æ", "–û—Ç –ø–æ—Ç–µ—Ä–∏ —Ä–∞–±–æ—Ç—ã"],
                price: 120000,
                suitableFor: [1]
            },
            {
                id: "standard",
                name: "–°–¢–ê–ù–î–ê–†–¢–ù–ê–Ø –ó–ê–©–ò–¢–ê", 
                description: "–ë–∞–∑–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤. –í–∫–ª—é—á–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∫–ª–∞—Å—Å–∞.",
                coverage: ["–ê–≤—Ç–æ –û–°–ê–ì–û", "–ñ–∏–∑–Ω—å", "–ò–º—É—â–µ—Å—Ç–≤–æ"],
                price: 60000,
                suitableFor: [1]
            },
            {
                id: "student",
                name: "–°–¢–£–î–ï–ù–ß–ï–°–ö–ò–ô –ü–ê–ö–ï–¢",
                description: "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤. –ó–∞—â–∏—Ç–∞ —Å–∞–º–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ø–æ –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ü–µ–Ω–µ.",
                coverage: ["–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", "–ò–º—É—â–µ—Å—Ç–≤–æ", "–ù–µ—Å—á–∞—Å—Ç–Ω—ã–µ —Å–ª—É—á–∞–∏"],
                price: 15000,
                suitableFor: [2]
            },
            {
                id: "economy",
                name: "–≠–ö–û–ù–û–ú –í–ê–†–ò–ê–ù–¢",
                description: "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞. –¢–æ–ª—å–∫–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –≤–∏–¥—ã —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è.",
                coverage: ["–û–°–ê–ì–û"],
                price: 25000,
                suitableFor: [1, 2]
            },
            {
                id: "property",
                name: "–ó–ê–©–ò–¢–ê –ò–ú–£–©–ï–°–¢–í–ê",
                description: "–§–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∑–∞—â–∏—Ç–µ —Ü–µ–Ω–Ω–æ–≥–æ –∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π –∏ –∫—Ä–∞–∂.",
                coverage: ["–ò–º—É—â–µ—Å—Ç–≤–æ", "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞", "–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å"],
                price: 35000,
                suitableFor: [2]
            },
            {
                id: "agriculture",
                name: "–§–ï–†–ú–ï–†–°–ö–ê–Ø –ó–ê–©–ò–¢–ê",
                description: "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è —Å–µ–ª—å—Å–∫–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞. –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–æ–≤ —Ñ–µ—Ä–º–µ—Ä–æ–≤.",
                coverage: ["–°–µ–ª—å—Ö–æ–∑—Ç–µ—Ö–Ω–∏–∫–∞", "–£—Ä–æ–∂–∞–π", "–ñ–∏–≤–æ—Ç–Ω—ã–µ", "–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å"],
                price: 70000,
                suitableFor: [3]
            }
        ];

        const events = [
            {
                id: 1,
                clientId: 1,
                title: "üöó –°–ï–†–¨–ï–ó–ù–û–ï –î–¢–ü!",
                description: "–ê–ª–µ–∫—Å–µ–π –ø–æ–ø–∞–ª –≤ —Å–µ—Ä—å–µ–∑–Ω—É—é –∞–≤–∞—Ä–∏—é –ø–æ –¥–æ—Ä–æ–≥–µ –Ω–∞ —Ä–∞–±–æ—Ç—É. –ï–≥–æ –Ω–æ–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –ø–æ–ª—É—á–∏–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è.",
                damage: 850000,
                franchise: 120000, // –§—Ä–∞–Ω—à–∏–∑–∞
                question: "–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç—Ä–∞—Ö–æ–≤—É—é –≤—ã–ø–ª–∞—Ç—É –∑–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å:",
                formula: "–í—ã–ø–ª–∞—Ç–∞ = –£—â–µ—Ä–± - –§—Ä–∞–Ω—à–∏–∑–∞",
                formulaDetails: "–£—â–µ—Ä–±: 850,000 ‚Ç∏\n–§—Ä–∞–Ω—à–∏–∑–∞: 120,000 ‚Ç∏",
                answers: [
                    { text: "850,000 —Ç–µ–Ω–≥–µ (–ø–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–º–æ–Ω—Ç–∞)", correct: false },
                    { text: "730,000 —Ç–µ–Ω–≥–µ (850,000 - 120,000 —Ñ—Ä–∞–Ω—à–∏–∑–∞)", correct: true },
                    { text: "120,000 —Ç–µ–Ω–≥–µ (—Ç–æ–ª—å–∫–æ —Ñ—Ä–∞–Ω—à–∏–∑–∞)", correct: false },
                    { text: "0 —Ç–µ–Ω–≥–µ (–Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–æ–π)", correct: false }
                ],
                explanation: {
                    success: "–û—Ç–ª–∏—á–Ω–æ! –ü—Ä–µ–º–∏—É–º —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –ø–æ–∫—Ä—ã–ª–∞ 730,000 —Ç–µ–Ω–≥–µ —É—â–µ—Ä–±–∞ –ø–æ—Å–ª–µ –≤—ã—á–µ—Ç–∞ —Ñ—Ä–∞–Ω—à–∏–∑—ã.",
                    failure: "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —É—â–µ—Ä–± –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ö–ª–∏–µ–Ω—Ç—É –ø—Ä–∏–¥–µ—Ç—Å—è –ø–ª–∞—Ç–∏—Ç—å –∏–∑ —Å–≤–æ–µ–≥–æ –∫–∞—Ä–º–∞–Ω–∞."
                }
            },
            {
                id: 2,
                clientId: 2, 
                title: "üì± –£–ö–†–ê–î–ï–ù –ù–û–£–¢–ë–£–ö!",
                description: "–í —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —É –ú–∞—Ä–∏–∏ —É–∫—Ä–∞–ª–∏ –Ω–æ—É—Ç–±—É–∫ —Å –≤–∞–∂–Ω—ã–º–∏ —É—á–µ–±–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏.",
                damage: 450000,
                franchise: 15000, // –§—Ä–∞–Ω—à–∏–∑–∞
                question: "–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç—Ä–∞—Ö–æ–≤—É—é –≤—ã–ø–ª–∞—Ç—É –∑–∞ —É–∫—Ä–∞–¥–µ–Ω–Ω—ã–π –Ω–æ—É—Ç–±—É–∫:",
                formula: "–í—ã–ø–ª–∞—Ç–∞ = –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–º—É—â–µ—Å—Ç–≤–∞ - –§—Ä–∞–Ω—à–∏–∑–∞",
                formulaDetails: "–°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–æ—É—Ç–±—É–∫–∞: 450,000 ‚Ç∏\n–§—Ä–∞–Ω—à–∏–∑–∞: 15,000 ‚Ç∏",
                answers: [
                    { text: "450,000 —Ç–µ–Ω–≥–µ (–ø–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å)", correct: false },
                    { text: "435,000 —Ç–µ–Ω–≥–µ (450,000 - 15,000 —Ñ—Ä–∞–Ω—à–∏–∑–∞)", correct: true },
                    { text: "15,000 —Ç–µ–Ω–≥–µ (—Ç–æ–ª—å–∫–æ —Ñ—Ä–∞–Ω—à–∏–∑–∞)", correct: false },
                    { text: "0 —Ç–µ–Ω–≥–µ (–∫—Ä–∞–∂–∞ –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è)", correct: false }
                ],
                explanation: {
                    success: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π –ø–∞–∫–µ—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∫—Ä–∞–∂—É –∏–º—É—â–µ—Å—Ç–≤–∞ —Å –Ω–µ–±–æ–ª—å—à–æ–π —Ñ—Ä–∞–Ω—à–∏–∑–æ–π.",
                    failure: "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∫—Ä–∞–∂—É —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏."
                }
            },
            {
                id: 3,
                clientId: 3,
                title: "üå™Ô∏è –£–†–ê–ì–ê–ù –ü–û–í–†–ï–î–ò–õ –§–ï–†–ú–£!",
                description: "–°–∏–ª—å–Ω—ã–π —É—Ä–∞–≥–∞–Ω –ø–æ–≤—Ä–µ–¥–∏–ª –∫—Ä—ã—à—É —Ñ–µ—Ä–º–µ—Ä—Å–∫–æ–≥–æ –¥–æ–º–∞ –∏ —á–∞—Å—Ç—å —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏.",
                damage: 1200000,
                franchise: 120000, // –§—Ä–∞–Ω—à–∏–∑–∞
                question: "–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç—Ä–∞—Ö–æ–≤—É—é –≤—ã–ø–ª–∞—Ç—É –∑–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –æ—Ç —É—Ä–∞–≥–∞–Ω–∞:",
                formula: "–í—ã–ø–ª–∞—Ç–∞ = –£—â–µ—Ä–± - –§—Ä–∞–Ω—à–∏–∑–∞",
                formulaDetails: "–û–±—â–∏–π —É—â–µ—Ä–±: 1,200,000 ‚Ç∏\n–§—Ä–∞–Ω—à–∏–∑–∞: 120,000 ‚Ç∏",
                answers: [
                    { text: "1,200,000 —Ç–µ–Ω–≥–µ (–ø–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—â–µ—Ä–±–∞)", correct: false },
                    { text: "1,080,000 —Ç–µ–Ω–≥–µ (1,200,000 - 120,000 —Ñ—Ä–∞–Ω—à–∏–∑–∞)", correct: true },
                    { text: "120,000 —Ç–µ–Ω–≥–µ (—Ç–æ–ª—å–∫–æ —Ñ—Ä–∞–Ω—à–∏–∑–∞)", correct: false },
                    { text: "0 —Ç–µ–Ω–≥–µ (—Å—Ç–∏—Ö–∏–π–Ω—ã–µ –±–µ–¥—Å—Ç–≤–∏—è –Ω–µ –ø–æ–∫—Ä—ã–≤–∞—é—Ç—Å—è)", correct: false }
                ],
                explanation: {
                    success: "–í–µ—Ä–Ω–æ! –§–µ—Ä–º–µ—Ä—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —É—â–µ—Ä–± –æ—Ç —Å—Ç–∏—Ö–∏–π–Ω—ã—Ö –±–µ–¥—Å—Ç–≤–∏–π —Å –≤—ã—á–µ—Ç–æ–º —Ñ—Ä–∞–Ω—à–∏–∑—ã.",
                    failure: "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —É—â–µ—Ä–± –æ—Ç —Å—Ç–∏—Ö–∏–π–Ω—ã—Ö –±–µ–¥—Å—Ç–≤–∏–π."
                }
            }
        ];

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
        function initGame() {
            setTimeout(() => {
                document.getElementById('loading').classList.remove('active');
                document.getElementById('main-menu').classList.add('active');
            }, 3000);

            initRoleSelection();
        }

        function initRoleSelection() {
            const roleCards = document.querySelectorAll('.role-card');
            roleCards.forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('selected');
                });
            });
        }

        // –ù–ê–ß–ê–¢–¨ –ù–û–í–£–Æ –ò–ì–†–£
        function startNewGame() {
            const teamName = document.getElementById('team-name').value || "–°–ø–∞—Å–∞—Ç–µ–ª–∏";
            gameState.currentTeam = teamName;
            gameState.score = 0;
            gameState.completedCases = 0;
            gameState.timeLeft = 600;
            gameState.gameActive = true;

            document.getElementById('current-team').textContent = teamName;
            document.getElementById('current-score').textContent = "0";
            document.getElementById('cases-count').textContent = "0/3";

            document.getElementById('main-menu').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');

            startGameTimer();
            showClientSelection();
        }

        // –¢–ê–ô–ú–ï–† –ò–ì–†–´
        function startGameTimer() {
            const timerElement = document.getElementById('game-timer');
            
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            
            gameState.timerInterval = setInterval(() => {
                if (!gameState.gameActive) {
                    clearInterval(gameState.timerInterval);
                    return;
                }

                gameState.timeLeft--;
                const minutes = Math.floor(gameState.timeLeft / 60);
                const seconds = gameState.timeLeft % 60;
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                    endGame();
                }
            }, 1000);
        }

        // –ü–û–ö–ê–ó–ê–¢–¨ –í–´–ë–û–† –ö–õ–ò–ï–ù–¢–ê
        function showClientSelection() {
            gameState.currentStage = 'client';
            const gameContent = document.querySelector('.game-content');
            const nextBtn = document.getElementById('next-btn');
            
            nextBtn.style.display = 'none';
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è
            const availableClients = clients.filter(client => 
                !gameState.completedCases || gameState.completedCases < client.id
            );
            
            if (availableClients.length === 0) {
                endGame();
                return;
            }

            gameState.currentClient = availableClients[0];
            
            gameContent.innerHTML = `
                <div class="client-profile">
                    <div class="client-avatar">${gameState.currentClient.avatar}</div>
                    <h2 style="font-size: 2em; margin-bottom: 15px;">üë§ –ö–õ–ò–ï–ù–¢: ${gameState.currentClient.name}</h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> ${gameState.currentClient.age} –ª–µ—Ç
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <strong>–ü—Ä–æ—Ñ–µ—Å—Å–∏—è:</strong> ${gameState.currentClient.occupation}
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <strong>–î–æ—Ö–æ–¥:</strong> ${gameState.currentClient.income}
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <strong>–°–µ–º—å—è:</strong> ${gameState.currentClient.family}
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <strong>–ò–º—É—â–µ—Å—Ç–≤–æ:</strong> ${gameState.currentClient.property}
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${gameState.currentClient.description}
                    </div>
                    
                    <div style="background: rgba(255,0,0,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #ff0000;">
                        <strong>–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:</strong><br>
                        ${gameState.currentClient.risks.map(risk => `‚Ä¢ ${risk}`).join('<br>')}
                    </div>
                    
                    <div style="background: rgba(0,255,0,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #00ff00;">
                        <strong>–ë—é–¥–∂–µ—Ç –Ω–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∫—É:</strong> ${gameState.currentClient.budget.toLocaleString()} ‚Ç∏ –≤ –≥–æ–¥
                    </div>
                </div>
                
                <h3 style="font-size: 1.5em; margin: 30px 0 20px 0; color: #00ffff; text-align: center;">
                    üõ°Ô∏è –í–´–ë–ï–†–ò–¢–ï –ü–û–î–•–û–î–Ø–©–£–Æ –°–¢–†–ê–•–û–í–ö–£:
                </h3>
                
                <div class="insurance-options" id="insurance-options">
                    ${insurancePackages.map(insurance => `
                        <div class="insurance-card" data-id="${insurance.id}" onclick="selectInsurance('${insurance.id}')">
                            <h4 style="color: #00ffff; margin-bottom: 10px;">${insurance.name}</h4>
                            <p style="margin-bottom: 15px; opacity: 0.9;">${insurance.description}</p>
                            <div style="background: rgba(0,255,255,0.1); padding: 10px; border-radius: 8px; margin-bottom: 10px;">
                                <strong>–ü–æ–∫—Ä—ã—Ç–∏–µ:</strong><br>
                                ${insurance.coverage.map(item => `‚úì ${item}`).join('<br>')}
                            </div>
                            <div class="insurance-price">${insurance.price.toLocaleString()} ‚Ç∏/–≥–æ–¥</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // –í–´–ë–†–ê–¢–¨ –°–¢–†–ê–•–û–í–ö–£
        function selectInsurance(insuranceId) {
            const insuranceCards = document.querySelectorAll('.insurance-card');
            insuranceCards.forEach(card => card.classList.remove('selected'));
            
            const selectedCard = document.querySelector(`[data-id="${insuranceId}"]`);
            selectedCard.classList.add('selected');
            
            gameState.selectedInsurance = insurancePackages.find(ins => ins.id === insuranceId);
            
            document.getElementById('next-btn').style.display = 'block';
        }

        // –°–õ–ï–î–£–Æ–©–ò–ô –≠–¢–ê–ü
        function nextStage() {
            if (gameState.currentStage === 'client') {
                if (!gameState.selectedInsurance) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞—Ö–æ–≤–∫—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞!');
                    return;
                }
                showEvent();
            } else if (gameState.currentStage === 'event') {
                showCalculation();
            }
        }

        // –ü–û–ö–ê–ó–ê–¢–¨ –°–û–ë–´–¢–ò–ï
        function showEvent() {
            gameState.currentStage = 'event';
            const gameContent = document.querySelector('.game-content');
            const nextBtn = document.getElementById('next-btn');
            nextBtn.style.display = 'none';
            
            const event = events.find(e => e.clientId === gameState.currentClient.id);
            
            gameContent.innerHTML = `
                <div class="event-screen">
                    <div class="event-info">
                        <div style="font-size: 3em; margin-bottom: 20px;">üò±</div>
                        <h2 style="font-size: 2em; margin-bottom: 15px;">${event.title}</h2>
                        <p style="font-size: 1.2em; margin-bottom: 10px;">${event.description}</p>
                        <p style="font-size: 1.1em; color: #ff6666;">
                            <strong>–£—â–µ—Ä–±:</strong> ${event.damage.toLocaleString()} ‚Ç∏
                        </p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin: 20px 0; border: 2px solid #00ffff;">
                        <h3 style="color: #00ffff; margin-bottom: 15px;">üìã –í–´–ë–†–ê–ù–ù–ê–Ø –°–¢–†–ê–•–û–í–ö–ê:</h3>
                        <p><strong>${gameState.selectedInsurance.name}</strong></p>
                        <p>${gameState.selectedInsurance.description}</p>
                    </div>
                    
                    <button onclick="showCalculation()" class="btn-primary" style="margin-top: 20px;">
                        üî¢ –ü–ï–†–ï–ô–¢–ò –ö –†–ê–°–ß–ï–¢–£ –í–´–ü–õ–ê–¢–´
                    </button>
                </div>
            `;
        }

        // –ü–û–ö–ê–ó–ê–¢–¨ –†–ê–°–ß–ï–¢ –í–´–ü–õ–ê–¢–´
        function showCalculation() {
            gameState.currentStage = 'calculation';
            const gameContent = document.querySelector('.game-content');
            const event = events.find(e => e.clientId === gameState.currentClient.id);
            
            const isCorrectInsurance = gameState.selectedInsurance.suitableFor.includes(gameState.currentClient.id);
            
            gameContent.innerHTML = `
                <div class="event-screen">
                    <div class="calculation-interface">
                        <h3 style="font-size: 1.5em; margin-bottom: 20px; color: #00ffff;">${event.question}</h3>
                        
                        <div class="formula-box">
                            <div class="formula-title">üìê –§–û–†–ú–£–õ–ê –†–ê–°–ß–ï–¢–ê:</div>
                            <div class="formula">${event.formula}</div>
                            <div style="font-size: 0.9em; opacity: 0.8; white-space: pre-line;">${event.formulaDetails}</div>
                        </div>
                        
                        <div class="quick-actions">
                            ${event.answers.map((answer, index) => `
                                <button class="action-btn" onclick="checkCalculation(${index}, ${isCorrectInsurance})">
                                    ${answer.text}
                                </button>
                            `).join('')}
                        </div>
                        
                        <div id="calculation-feedback" class="feedback-area"></div>
                    </div>
                </div>
            `;
        }

        // –ü–†–û–í–ï–†–ò–¢–¨ –†–ê–°–ß–ï–¢
        function checkCalculation(answerIndex, isCorrectInsurance) {
            const event = events.find(e => e.clientId === gameState.currentClient.id);
            const actionButtons = document.querySelectorAll('.action-btn');
            const feedbackElement = document.getElementById('calculation-feedback');
            
            actionButtons.forEach(btn => {
                btn.style.pointerEvents = 'none';
                btn.classList.remove('correct', 'incorrect');
            });

            const selectedAnswer = event.answers[answerIndex];
            const isCorrectAnswer = selectedAnswer.correct && isCorrectInsurance;
            
            actionButtons.forEach((btn, index) => {
                if (event.answers[index].correct && isCorrectInsurance) {
                    btn.classList.add('correct');
                } else if (index === answerIndex) {
                    btn.classList.add('incorrect');
                }
            });

            if (isCorrectAnswer) {
                feedbackElement.innerHTML = `
                    <div class="result-message success">
                        ‚úÖ <strong>–ü–†–ê–í–ò–õ–¨–ù–û!</strong> ${event.explanation.success}
                    </div>
                `;
                gameState.score += 1000;
                gameState.completedCases++;
            } else {
                feedbackElement.innerHTML = `
                    <div class="result-message failure">
                        ‚ùå <strong>–û–®–ò–ë–ö–ê!</strong> ${isCorrectInsurance ? 
                            '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—ã–ø–ª–∞—Ç—ã!' : 
                            event.explanation.failure
                        }
                    </div>
                `;
            }

            document.getElementById('current-score').textContent = gameState.score;
            document.getElementById('cases-count').textContent = `${gameState.completedCases}/3`;

            setTimeout(() => {
                if (gameState.completedCases >= 3) {
                    endGame();
                } else {
                    showClientSelection();
                }
            }, 4000);
        }

        // –ó–ê–í–ï–†–®–ï–ù–ò–ï –ò–ì–†–´
        function endGame() {
            gameState.gameActive = false;
            
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('results-screen').classList.add('active');

            document.getElementById('final-cases').textContent = `${gameState.completedCases}/3`;
            document.getElementById('final-score').textContent = gameState.score;

            let rankIcon, rankTitle, totalResult;
            if (gameState.completedCases === 3 && gameState.score >= 3000) {
                rankIcon = "üëë"; 
                rankTitle = "–≠–ö–°–ü–ï–†–¢ –ü–û –°–¢–†–ê–•–û–í–ê–ù–ò–Æ!";
                totalResult = "–û–¢–õ–ò–ß–ù–û";
            } else if (gameState.completedCases >= 2) {
                rankIcon = "‚≠ê";
                rankTitle = "–û–ü–´–¢–ù–´–ô –ö–û–ù–°–£–õ–¨–¢–ê–ù–¢";
                totalResult = "–•–û–†–û–®–û";
            } else {
                rankIcon = "üî∞";
                rankTitle = "–ù–û–í–ò–ß–û–ö-–ö–û–ù–°–£–õ–¨–¢–ê–ù–¢";
                totalResult = "–ù–£–ñ–ù–û –£–ß–ò–¢–¨–°–Ø";
            }

            document.getElementById('rank-icon').textContent = rankIcon;
            document.getElementById('rank-title').textContent = rankTitle;
            document.getElementById('total-score').textContent = totalResult;
        }

        // –ò–ì–†–ê–¢–¨ –°–ù–û–í–ê
        function playAgain() {
            document.getElementById('results-screen').classList.remove('active');
            startNewGame();
        }

        // –ü–û–ö–ê–ó–ê–¢–¨ –ò–ù–°–¢–†–£–ö–¶–ò–ò
        function showInstructions() {
            alert(`üéØ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–ì–†–ï:

1. üë§ –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞
2. üõ°Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é —Å—Ç—Ä–∞—Ö–æ–≤–∫—É –ø–æ –µ–≥–æ –±—é–¥–∂–µ—Ç—É –∏ —Ä–∏—Å–∫–∞–º
3. üö® –î–æ–∂–¥–∏—Ç–µ—Å—å —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ —Å–ª—É—á–∞—è
4. üî¢ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –≤—ã–ø–ª–∞—Ç—É
5. üí∞ –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –±–∞–ª–ª—ã –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–¶–µ–ª—å: –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å 3 –∫–ª–∏–µ–Ω—Ç–æ–≤!`);
        }

        // –ü–û–ö–ê–ó–ê–¢–¨ –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
        function showMainMenu() {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById('main-menu').classList.add('active');
        }

        // –ó–ê–ü–£–°–ö –ò–ì–†–´
        window.onload = initGame;
    </script>
</body>
</html>